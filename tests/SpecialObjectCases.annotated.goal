import checkers.javari.quals.ReadOnly;
import checkers.javari.quals.Mutable;

/**
 * Tests things such as Object o = Day[] and Object[] a = Day[][].
 */
public class SpecialObjectCases {

    public static class Cell<T extends java.lang.@ReadOnly Object> {
	public @ReadOnly T val;
	public @ReadOnly T getVal(@ReadOnly Cell<T> this) { return val; }
	public void setVal(@Mutable Cell<T> this, @ReadOnly T val) { this.val = val; }
    }

    public static class Day {
        public int day;
        public Day(@ReadOnly Day this) { }
        public Day(@ReadOnly Day this, int d) { this.day = d; }
        public int getDay(@ReadOnly Day this) { return day; }
        public void setDay(@Mutable Day this, int d) { this.day = d; }
    }

    public static void foo() {
        @ReadOnly Object o = new Day[3];
        o = new Cell<Day>();
        @ReadOnly Object @ReadOnly [] a = new Day[3][1];
    }

    public static @ReadOnly String bar(@ReadOnly Object o) {
        if (o.hashCode() < 0) {
            o = new Cell<Day>();
        } else if (o.hashCode() > 10) {
            o = new Day[3];
        }
        @ReadOnly String s = o.toString();
        return s;
    }
}
